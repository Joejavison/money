<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.29.0">


<link href="css/style.css" rel="stylesheet" type="text/css">

<script type="text/javascript" src="js/doc.js"></script>
<script type="text/javascript">
  CrystalDoc.base_path = "";
</script>

  <meta id="repository-name" content="github.com/crystal-money/money">
  <title>README - github.com/crystal-money/money</title>
</head>
<body>

<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="repository-links">
      <a href="index.html">README</a>
    </div>
  </div>

  <div class="search-results" class="hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class=" " data-id="github.com/crystal-money/money/BigDecimal" data-name="bigdecimal">
      <a href="BigDecimal.html">BigDecimal</a>
      
    </li>
  
  <li class="parent " data-id="github.com/crystal-money/money/Money" data-name="money">
      <a href="Money.html">Money</a>
      
        <ul>
  
  <li class=" " data-id="github.com/crystal-money/money/Money/Allocate" data-name="money::allocate">
      <a href="Money/Allocate.html">Allocate</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-money/money/Money/Arithmetic" data-name="money::arithmetic">
      <a href="Money/Arithmetic.html">Arithmetic</a>
      
    </li>
  
  <li class="parent " data-id="github.com/crystal-money/money/Money/Bank" data-name="money::bank">
      <a href="Money/Bank.html">Bank</a>
      
        <ul>
  
  <li class=" " data-id="github.com/crystal-money/money/Money/Bank/SingleCurrency" data-name="money::bank::singlecurrency">
      <a href="Money/Bank/SingleCurrency.html">SingleCurrency</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-money/money/Money/Bank/VariableExchange" data-name="money::bank::variableexchange">
      <a href="Money/Bank/VariableExchange.html">VariableExchange</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/crystal-money/money/Money/Casting" data-name="money::casting">
      <a href="Money/Casting.html">Casting</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-money/money/Money/Constructors" data-name="money::constructors">
      <a href="Money/Constructors.html">Constructors</a>
      
    </li>
  
  <li class="parent " data-id="github.com/crystal-money/money/Money/Currency" data-name="money::currency">
      <a href="Money/Currency.html">Currency</a>
      
        <ul>
  
  <li class=" " data-id="github.com/crystal-money/money/Money/Currency/Enumeration" data-name="money::currency::enumeration">
      <a href="Money/Currency/Enumeration.html">Enumeration</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-money/money/Money/Currency/Loader" data-name="money::currency::loader">
      <a href="Money/Currency/Loader.html">Loader</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-money/money/Money/Currency/Rate" data-name="money::currency::rate">
      <a href="Money/Currency/Rate.html">Rate</a>
      
    </li>
  
  <li class="parent " data-id="github.com/crystal-money/money/Money/Currency/RateStore" data-name="money::currency::ratestore">
      <a href="Money/Currency/RateStore.html">RateStore</a>
      
        <ul>
  
  <li class=" " data-id="github.com/crystal-money/money/Money/Currency/RateStore/Memory" data-name="money::currency::ratestore::memory">
      <a href="Money/Currency/RateStore/Memory.html">Memory</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/crystal-money/money/Money/DifferentCurrencyError" data-name="money::differentcurrencyerror">
      <a href="Money/DifferentCurrencyError.html">DifferentCurrencyError</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-money/money/Money/Error" data-name="money::error">
      <a href="Money/Error.html">Error</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-money/money/Money/Exchange" data-name="money::exchange">
      <a href="Money/Exchange.html">Exchange</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-money/money/Money/Formatting" data-name="money::formatting">
      <a href="Money/Formatting.html">Formatting</a>
      
    </li>
  
  <li class="parent " data-id="github.com/crystal-money/money/Money/Parse" data-name="money::parse">
      <a href="Money/Parse.html">Parse</a>
      
        <ul>
  
  <li class=" " data-id="github.com/crystal-money/money/Money/Parse/Error" data-name="money::parse::error">
      <a href="Money/Parse/Error.html">Error</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/crystal-money/money/Money/UndefinedSmallestDenominationError" data-name="money::undefinedsmallestdenominationerror">
      <a href="Money/UndefinedSmallestDenominationError.html">UndefinedSmallestDenominationError</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-money/money/Money/UnknownCurrencyError" data-name="money::unknowncurrencyerror">
      <a href="Money/UnknownCurrencyError.html">UnknownCurrencyError</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-money/money/Money/UnknownRateError" data-name="money::unknownrateerror">
      <a href="Money/UnknownRateError.html">UnknownRateError</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1>money <a href="https://travis-ci.org/crystal-money/money" target="_blank"><img src="https://travis-ci.org/crystal-money/money.svg?branch=master" alt="Build Status"/></a> <a href="https://github.com/crystal-money/money/releases" target="_blank"><img src="https://img.shields.io/github/release/crystal-money/money.svg" alt="Releases"/></a> <a href="https://github.com/crystal-money/money/blob/master/LICENSE" target="_blank"><img src="https://img.shields.io/github/license/crystal-money/money.svg" alt="License"/></a></h1>

<h2>Introduction</h2>

<p>A Crystal shard for dealing with money and currency conversion ported from <a href="https://github.com/RubyMoney/money" target="_blank">RubyMoney</a>.</p>

<h3>Features</h3>

<ul><li>Provides a <code><a href="Money.html">Money</a></code> class which encapsulates all information about an certain
  amount of money, such as its value and its currency.</li><li>Provides a <code><a href="Money/Currency.html">Money::Currency</a></code> class which encapsulates all information about
  a monetary unit.</li><li>Represents monetary values as integers, in cents. This avoids floating point
  rounding errors.</li><li>Represents currency as <code><a href="Money/Currency.html">Money::Currency</a></code> instances providing a high level of
  flexibility.</li><li>Provides APIs for exchanging money from one currency to another.</li></ul>

<h3>Resources</h3>

<ul><li><a href="https://crystal-money.github.io/money/" target="_blank">API Documentation</a></li><li><a href="https://github.com/crystal-money/money" target="_blank">Git Repository</a></li></ul>

<h3>Notes</h3>

<ul><li>Your app must use UTF-8 to function with this library. There are a
  number of non-ASCII currency attributes.</li><li>This app requires JSON.</li></ul>

<h2>Installation</h2>

<p>Add this to your application's <code>shard.yml</code>:</p>

<pre><code class="language-yaml">dependencies:
  money:
    github: crystal-money/money</code></pre>

<p>Install with <code>shards install</code>.</p>

<h2>Usage</h2>

<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;money&quot;</span>

<span class="c"># 10.00 USD</span>
money <span class="o">=</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;USD&quot;</span>)
money.cents    <span class="c"># =&gt; 1000</span>
money.currency <span class="c"># =&gt; Money::Currency.find(&quot;USD&quot;)</span>

<span class="c"># Comparisons</span>
<span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;USD&quot;</span>) <span class="o">==</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;USD&quot;</span>) <span class="c"># =&gt; true</span>
<span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;USD&quot;</span>) <span class="o">==</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">100</span>,  <span class="s">&quot;USD&quot;</span>) <span class="c"># =&gt; false</span>
<span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;USD&quot;</span>) <span class="o">==</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;EUR&quot;</span>) <span class="c"># =&gt; false</span>
<span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;USD&quot;</span>) <span class="o">!=</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;EUR&quot;</span>) <span class="c"># =&gt; true</span>

<span class="c"># Arithmetic</span>
<span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;USD&quot;</span>) <span class="o">+</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">500</span>, <span class="s">&quot;USD&quot;</span>) <span class="o">==</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">1500</span>, <span class="s">&quot;USD&quot;</span>)
<span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;USD&quot;</span>) <span class="o">-</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">200</span>, <span class="s">&quot;USD&quot;</span>) <span class="o">==</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">800</span>,  <span class="s">&quot;USD&quot;</span>)
<span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;USD&quot;</span>) <span class="o">/</span> <span class="n">5</span>                     <span class="o">==</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">200</span>,  <span class="s">&quot;USD&quot;</span>)
<span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;USD&quot;</span>) <span class="o">*</span> <span class="n">5</span>                     <span class="o">==</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">5000</span>, <span class="s">&quot;USD&quot;</span>)

<span class="c"># Unit to subunit conversions</span>
<span class="t">Money</span>.from_amount(<span class="n">5</span>, <span class="s">&quot;USD&quot;</span>) <span class="o">==</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">500</span>,  <span class="s">&quot;USD&quot;</span>) <span class="c"># 5 USD</span>
<span class="t">Money</span>.from_amount(<span class="n">5</span>, <span class="s">&quot;JPY&quot;</span>) <span class="o">==</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">5</span>,    <span class="s">&quot;JPY&quot;</span>) <span class="c"># 5 JPY</span>
<span class="t">Money</span>.from_amount(<span class="n">5</span>, <span class="s">&quot;TND&quot;</span>) <span class="o">==</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">5000</span>, <span class="s">&quot;TND&quot;</span>) <span class="c"># 5 TND</span>

<span class="c"># Currency conversions</span>
some_code_to_setup_exchange_rates
<span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;USD&quot;</span>).exchange_to(<span class="s">&quot;EUR&quot;</span>) <span class="o">==</span> <span class="t">Money</span>.<span class="k">new</span>(some_value, <span class="s">&quot;EUR&quot;</span>)

<span class="c"># Formatting (see Formatting section for more options)</span>
<span class="t">Money</span>.<span class="k">new</span>(<span class="n">100</span>, <span class="s">&quot;USD&quot;</span>).format <span class="c"># =&gt; &quot;$1.00&quot;</span>
<span class="t">Money</span>.<span class="k">new</span>(<span class="n">100</span>, <span class="s">&quot;GBP&quot;</span>).format <span class="c"># =&gt; &quot;£1.00&quot;</span>
<span class="t">Money</span>.<span class="k">new</span>(<span class="n">100</span>, <span class="s">&quot;EUR&quot;</span>).format <span class="c"># =&gt; &quot;€1.00&quot;</span></code></pre>

<h2>Currency</h2>

<p>Currencies are consistently represented as instances of <code><a href="Money/Currency.html">Money::Currency</a></code>.
The most part of <code><a href="Money.html">Money</a></code> APIs allows you to supply either a <code>String</code>, <code>Symbol</code>
or a <code><a href="Money/Currency.html">Money::Currency</a></code>.</p>

<pre><code class="language-crystal"><span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;USD&quot;</span>) <span class="o">==</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="t">Money</span><span class="t">::</span><span class="t">Currency</span>.find(<span class="s">&quot;USD&quot;</span>))
<span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;EUR&quot;</span>).currency <span class="o">==</span> <span class="t">Money</span><span class="t">::</span><span class="t">Currency</span>.find(<span class="n">:eur</span>)
<span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;PLN&quot;</span>).currency <span class="o">==</span> <span class="t">Money</span><span class="t">::</span><span class="t">Currency</span>[<span class="n">:pln</span>]</code></pre>

<p>A <code><a href="Money/Currency.html">Money::Currency</a></code> instance holds all the information about the currency,
including the currency symbol, name and much more.</p>

<pre><code class="language-crystal">currency <span class="o">=</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;USD&quot;</span>).currency
currency.code <span class="c"># =&gt; &quot;USD&quot;</span>
currency.name <span class="c"># =&gt; &quot;United States Dollar&quot;</span></code></pre>

<p>To define a new <code><a href="Money/Currency.html">Money::Currency</a></code> use <code>Money::Currency.register</code> as shown
below.</p>

<pre><code class="language-crystal">currency <span class="o">=</span> <span class="t">Money</span><span class="t">::</span><span class="t">Currency</span>.from_json({
  priority:            <span class="n">1</span>,
  code:                <span class="s">&quot;USD&quot;</span>,
  iso_numeric:         <span class="n">840</span>,
  name:                <span class="s">&quot;United States Dollar&quot;</span>,
  symbol:              <span class="s">&quot;$&quot;</span>,
  symbol_first:        <span class="n">true</span>,
  subunit:             <span class="s">&quot;Cent&quot;</span>,
  subunit_to_unit:     <span class="n">100</span>,
  decimal_mark:        <span class="s">&quot;.&quot;</span>,
  thousands_separator: <span class="s">&quot;,&quot;</span>
}.to_json)

<span class="t">Money</span><span class="t">::</span><span class="t">Currency</span>.register(currency)</code></pre>

<p>The pre-defined set of attributes includes:</p>

<ul><li><code>:priority</code> a numerical value you can use to sort/group the currency list</li><li><code>:code</code> the international 3-letter code as defined by the ISO 4217 standard</li><li><code>:iso_numeric</code> the international 3-digit code as defined by the ISO 4217 standard</li><li><code>:name</code> the currency name</li><li><code>:symbol</code> the currency symbol (UTF-8 encoded)</li><li><code>:symbol_first</code> whether a money symbol should go before the amount</li><li><code>:subunit</code> the name of the fractional monetary unit</li><li><code>:subunit_to_unit</code> the proportion between the unit and the subunit</li><li><code>:decimal_mark</code> character between the whole and fraction amounts</li><li><code>:thousands_separator</code> character between each thousands place</li></ul>

<p>All attributes except <code>:code</code> and <code>:subunit_to_unit</code> are optional.
Some attributes, such as <code>:symbol</code>, are used by the <code><a href="Money.html">Money</a></code> class to print out a
representation of the object. Other attributes, such as <code>:name</code> or <code>:priority</code>,
exist to provide a basic API you can take advantage of to build your application.</p>

<h3>:priority</h3>

<p>The priority attribute is an arbitrary numerical value you can assign to the
<code><a href="Money/Currency.html">Money::Currency</a></code> and use in sorting/grouping operation.</p>

<p>For instance, let's assume your web application needs to render a currency
selector like the one available
<a href="https://finance.yahoo.com/currency-converter/" target="_blank">here</a>. You can create a couple of
custom methods to return the list of major currencies and all currencies as
follows:</p>

<pre><code class="language-crystal"><span class="c"># Returns an array of currency id where priority &lt; 10</span>
<span class="k">def</span> <span class="m">major_currencies</span>(hash)
  hash.values.sort.take_while(<span class="o">&amp;</span>.priority.try(<span class="o">&amp;</span>.<span class="o">&lt;</span>(<span class="n">10</span>))).map(<span class="o">&amp;</span>.id)
<span class="k">end</span>

<span class="c"># Returns an array of all currency id</span>
<span class="k">def</span> <span class="m">all_currencies</span>(hash)
  hash.keys
<span class="k">end</span>

major_currencies(<span class="t">Money</span><span class="t">::</span><span class="t">Currency</span>.table)
<span class="c"># =&gt; [&quot;usd&quot;, &quot;eur&quot;, &quot;gbp&quot;, &quot;aud&quot;, &quot;cad&quot;, &quot;jpy&quot;]</span>

all_currencies(<span class="t">Money</span><span class="t">::</span><span class="t">Currency</span>.table)
<span class="c"># =&gt; [&quot;aed&quot;, &quot;afn&quot;, &quot;all&quot;, ...]</span></code></pre>

<h3>Default Currency</h3>

<p>By default <code><a href="Money.html">Money</a></code> defaults to USD as its currency. This can be overwritten
using:</p>

<pre><code class="language-crystal"><span class="t">Money</span>.default_currency <span class="o">=</span> <span class="t">Money</span><span class="t">::</span><span class="t">Currency</span>.find(<span class="s">&quot;CAD&quot;</span>)
<span class="c"># or</span>
<span class="t">Money</span>.default_currency <span class="o">=</span> <span class="n">:cad</span></code></pre>

<h3>Currency Exponent</h3>

<p>The exponent of a money value is the number of digits after the decimal
separator (which separates the major unit from the minor unit). See e.g.
<a href="https://www.currency-iso.org/en/shared/amendments/iso-4217-amendment.html" target="_blank">ISO 4217</a> for more
information. You can find the exponent (as an <code>Int32</code>) by</p>

<pre><code class="language-crystal"><span class="t">Money</span><span class="t">::</span><span class="t">Currency</span>.find(<span class="s">&quot;USD&quot;</span>).exponent <span class="c"># =&gt; 2</span>
<span class="t">Money</span><span class="t">::</span><span class="t">Currency</span>.find(<span class="s">&quot;JPY&quot;</span>).exponent <span class="c"># =&gt; 0</span>
<span class="t">Money</span><span class="t">::</span><span class="t">Currency</span>.find(<span class="s">&quot;MGA&quot;</span>).exponent <span class="c"># =&gt; 1</span></code></pre>

<h3>Currency Lookup</h3>

<p>To find a given currency by ISO 4217 numeric code (three digits) you can do</p>

<pre><code class="language-crystal"><span class="t">Money</span><span class="t">::</span><span class="t">Currency</span>.find(<span class="o">&amp;</span>.iso_numeric.<span class="o">==</span>(<span class="n">978</span>)) <span class="c"># =&gt; #&lt;Money::Currency @iso_numeric=978, @code=&quot;EUR&quot;, @name=&quot;Euro&quot;, @symbol=&quot;€&quot;, @subunit=&quot;Cent&quot;, @subunit_to_unit=100, @symbol_first=true ...&gt;</span></code></pre>

<h2>Currency Exchange</h2>

<p>Exchanging money is performed through an exchange <code>Bank</code> object. The default
exchange <code>Bank</code> object requires one to manually specify the exchange rate. Here's
an example of how it works:</p>

<pre><code class="language-crystal"><span class="t">Money</span>.default_bank.store[<span class="s">&quot;USD&quot;</span>, <span class="s">&quot;EUR&quot;</span>] <span class="o">=</span> <span class="n">1.24515</span>
<span class="t">Money</span>.default_bank.store[<span class="s">&quot;EUR&quot;</span>, <span class="s">&quot;USD&quot;</span>] <span class="o">=</span> <span class="n">0.803115</span>

<span class="t">Money</span>.<span class="k">new</span>(<span class="n">100</span>, <span class="s">&quot;USD&quot;</span>).exchange_to(<span class="s">&quot;EUR&quot;</span>) <span class="c"># =&gt; Money.new(@amount=1.24, @currency=&quot;EUR&quot;)</span>
<span class="t">Money</span>.<span class="k">new</span>(<span class="n">100</span>, <span class="s">&quot;EUR&quot;</span>).exchange_to(<span class="s">&quot;USD&quot;</span>) <span class="c"># =&gt; Money.new(@amount=0.8,  @currency=&quot;USD&quot;)</span></code></pre>

<p>Comparison and arithmetic operations work as expected:</p>

<pre><code class="language-crystal"><span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;USD&quot;</span>) <span class="o">&lt;=&gt;</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">900</span>, <span class="s">&quot;USD&quot;</span>) <span class="c"># =&gt; 1; 9.00 USD is smaller</span>
<span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;EUR&quot;</span>) <span class="o">+</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">10</span>, <span class="s">&quot;EUR&quot;</span>) <span class="c"># =&gt; Money.new(@amount=10.1, @currency=&quot;EUR&quot;)</span>

<span class="t">Money</span>.default_bank.store[<span class="s">&quot;USD&quot;</span>, <span class="s">&quot;EUR&quot;</span>] <span class="o">=</span> <span class="n">0.5</span>
<span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;EUR&quot;</span>) <span class="o">+</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">1000</span>, <span class="s">&quot;USD&quot;</span>) <span class="c"># =&gt; Money.new(@amount=15, @currency=&quot;EUR&quot;)</span></code></pre>

<h3>Exchange rate stores</h3>

<p>The default bank is initialized with an in-memory store for exchange rates.</p>

<pre><code class="language-crystal"><span class="t">Money</span>.default_bank <span class="o">=</span> <span class="t">Money</span><span class="t">::</span><span class="t">Bank</span><span class="t">::</span><span class="t">VariableExchange</span>.<span class="k">new</span>(<span class="t">Money</span><span class="t">::</span><span class="t">Currency</span><span class="t">::</span><span class="t">RateStore</span><span class="t">::</span><span class="t">Memory</span>.<span class="k">new</span>)</code></pre>

<p>You can pass you own store implementation, ie. for storing and retrieving rates off a database, file, cache, etc.</p>

<pre><code class="language-crystal"><span class="t">Money</span>.default_bank <span class="o">=</span> <span class="t">Money</span><span class="t">::</span><span class="t">Bank</span><span class="t">::</span><span class="t">VariableExchange</span>.<span class="k">new</span>(<span class="t">MyCustomStore</span>.<span class="k">new</span>)

<span class="c"># Add to the underlying store</span>
<span class="t">Money</span>.default_bank.store[<span class="s">&quot;USD&quot;</span>, <span class="s">&quot;CAD&quot;</span>] <span class="o">=</span> <span class="n">0.9</span>

<span class="c"># Retrieve from the underlying store</span>
<span class="t">Money</span>.default_bank.store[<span class="s">&quot;USD&quot;</span>, <span class="s">&quot;CAD&quot;</span>] <span class="c"># =&gt; 0.9</span>

<span class="c"># Exchanging amounts just works</span>
<span class="t">Money</span>.<span class="k">new</span>(<span class="n">10.0</span>, <span class="s">&quot;USD&quot;</span>).exchange_to(<span class="s">&quot;CAD&quot;</span>) <span class="c"># =&gt; Money(@amount=9 @currency=&quot;CAD&quot;)</span></code></pre>

<p>There is nothing stopping you from creating store objects which scrapes
<a href="http://www.xe.com" target="_blank">XE</a> for the current rates or just returns <code>rand(2)</code>:</p>

<pre><code class="language-crystal"><span class="t">Money</span>.default_bank <span class="o">=</span> <span class="t">Money</span><span class="t">::</span><span class="t">Bank</span><span class="t">::</span><span class="t">VariableExchange</span>.<span class="k">new</span>(<span class="t">StoreWhichScrapesXeDotCom</span>.<span class="k">new</span>)</code></pre>

<p>You can also implement your own <code>Bank</code> to calculate exchanges differently.
Different banks can share Stores.</p>

<pre><code class="language-crystal"><span class="t">Money</span>.default_bank <span class="o">=</span> <span class="t">MyCustomBank</span>.<span class="k">new</span>(<span class="t">Money</span><span class="t">::</span><span class="t">Currency</span><span class="t">::</span><span class="t">RateStore</span><span class="t">::</span><span class="t">Memory</span>.<span class="k">new</span>)</code></pre>

<p>If you wish to disable automatic currency conversion to prevent arithmetic when
currencies don't match:</p>

<pre><code class="language-crystal"><span class="t">Money</span>.disallow_currency_conversion!</code></pre>

<h2>Rounding</h2>

<p>By default, <code><a href="Money.html">Money</a></code> objects are rounded to the nearest cent and the additional precision is not preserved:</p>

<pre><code class="language-crystal"><span class="t">Money</span>.<span class="k">new</span>(<span class="n">2.34567</span>).to_s <span class="c"># =&gt; &quot;$2.35&quot;</span></code></pre>

<p>To round to the nearest cent (or anything more precise), you can use the <code>Money#round</code> method.</p>

<pre><code class="language-crystal"><span class="t">Money</span>.<span class="k">new</span>(<span class="n">2.34567</span>).round(<span class="n">4</span>).to_s <span class="c"># =&gt; &quot;$2.35&quot;</span></code></pre>

<p>To retain the additional precision, you will also need to set <code>Money.infinite_precision</code> to <code>true</code>.</p>

<pre><code class="language-crystal"><span class="t">Money</span>.infinite_precision <span class="o">=</span> <span class="n">true</span>

<span class="t">Money</span>.<span class="k">new</span>(<span class="n">2.34567</span>).to_s          <span class="c"># =&gt; &quot;$2.34567&quot;</span>
<span class="t">Money</span>.<span class="k">new</span>(<span class="n">2.34567</span>).round(<span class="n">4</span>).to_s <span class="c"># =&gt; &quot;$2.3457&quot;</span></code></pre>

<h2>Formatting</h2>

<p>There are several formatting rules for when <code>Money#format</code> is called. For more information, check out the <a href="https://github.com/crystal-money/money/blob/master/src/money/money/formatting.cr" target="_blank">formatting module source</a>, or read the latest release's <a href="http://crystal-money.github.io/money/Money/Formatting.html" target="_blank">docs</a>.</p>

<p>If you wish to format money according to the EU's <a href="http://publications.europa.eu/code/en/en-370303.htm#position" target="_blank">Rules for expressing monetary units</a> in either English, Irish, Latvian or Maltese:</p>

<pre><code class="language-crystal">money <span class="o">=</span> <span class="t">Money</span>.<span class="k">new</span>(<span class="n">123</span>, <span class="n">:gbp</span>)               <span class="c"># =&gt; Money(@amount=1.23 @currency=&quot;GBP&quot;)</span>
money.format(symbol: <span class="s">&quot;</span><span class="i">#{</span>money.currency<span class="i">}</span><span class="s"> &quot;</span>) <span class="c"># =&gt; &quot;GBP 1.23&quot;</span></code></pre>

<h2>Heuristics</h2>

<p>To parse a <code>String</code> containing amount with currency code or symbol you can do</p>

<pre><code class="language-crystal"><span class="t">Money</span>.parse(<span class="s">&quot;$12.34&quot;</span>)    <span class="c"># =&gt; Money(@amount=12.34, @currency=&quot;USD&quot;)</span>
<span class="t">Money</span>.parse(<span class="s">&quot;12.34 USD&quot;</span>) <span class="c"># =&gt; Money(@amount=12.34, @currency=&quot;USD&quot;)</span></code></pre>

<h2>Contributors</h2>

<ul><li><a href="https://github.com/Sija" target="_blank">Sija</a> Sijawusz Pur Rahnama - creator, maintainer</li></ul>

<h2>Thanks</h2>

<p>Thanks to all of the <a href="https://github.com/RubyMoney/money/blob/master/AUTHORS" target="_blank">contributors</a> for their awesome work on <a href="https://github.com/RubyMoney/money" target="_blank">RubyMoney</a>.</p>
</div>
</body>
</html>
